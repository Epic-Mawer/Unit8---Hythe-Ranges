# Define the main characters and images
define p = Character("Protagonist", color="#FFFFFF")
define c = Character("Captain Mason", color="#87CEEB")
define d = Character("Sergeant Davis", color="#32CD32")

# Define a variable to track good and bad choices
default trust_points = 0

# Start the game script
label start:

    scene bg shooting_range_day with fade

    p "The sound of distant gunfire echoes across the field, a constant reminder of where I am."
    p "Hythe Shooting Ranges, known for its sharp shooters and rigorous training grounds."
    p "But today, something feels... off."

    show captain_mason normal at right
    c "Welcome to Hythe, soldier. This isn't your typical day at the range."

    p "Captain Mason. A legend around these parts, and not just for his shooting skills."

    menu:
        "Ask what's different today":
            # Good choice
            $ trust_points += 1
            p "What's happening today, Captain? There's an air of tension I can't shake."
            c "Good eye, soldier. We've got an important exercise, but there's more to it than meets the eye."

        "Stay silent":
            # Bad choice
            $ trust_points -= 1
            p "(Better not ask too many questions. Just follow orders.)"
            c "Hesitant, are we? Keep your head in the game, soldier."

    c "Sergeant Davis will brief you on the details."
    hide captain_mason with dissolve

    show sergeant_davis stern at right
    d "Listen up. Today’s exercise isn’t just about accuracy or endurance."
    d "We’re simulating a real-life mission scenario. There’s a lot at stake."

    p "(Real-life mission? I thought this was just a training day.)"

    menu:
        "Press for more information":
            # Good choice
            $ trust_points += 1
            p "What kind of mission?"
            d "That’s classified. But you’ll find out soon enough. Good initiative, though."

        "Keep your thoughts to yourself":
            # Bad choice
            $ trust_points -= 1
            p "(I’ll stay quiet. Asking too many questions won’t get me anywhere.)"
            d "Silent type, huh? Better be ready to follow orders then."

    scene bg shooting_range_evening with fade

    p "As the sun starts to set, the shooting ranges are illuminated by the eerie glow of the floodlights."
    p "The usual calm and focus of training is replaced by an uneasy tension."
    
    d "Get ready. The exercise is about to begin."

    # Player's choice impacts the next event
    menu:
        "Prepare your rifle":
            # Good choice
            $ trust_points += 1
            p "I check my rifle, making sure it’s in perfect condition."
            p "There’s no room for error."
            d "Good. Stay sharp out there."

        "Survey the field":
            # Neutral choice
            p "I glance around the field, analyzing the terrain and noting possible cover points."
            p "It might just be training, but it’s better to be prepared for anything."
            d "Always thinking ahead. I like that."

    p "With a deep breath, I step forward onto the shooting range. The sound of gunfire fills the air once again."

    # A mysterious twist is introduced
    scene bg shooting_range_night with fade

    p "(Something's wrong.)"
    p "The lights flicker, and for a moment, everything goes dark."

    show captain_mason at left
    c "Stay focused, soldier. This isn’t just an exercise anymore."
    
    p "Captain Mason's voice cuts through the darkness. What’s happening?"

    menu:
        "Ask about the mission":
            # Good choice
            $ trust_points += 1
            p "Captain, what’s going on? This doesn’t feel right."
            c "It never was just training. We’re in for a long night."

        "Stay alert and wait":
            # Neutral choice
            p "(Now’s not the time to panic. I need to stay alert and follow orders.)"
            c "Smart move. Let’s keep going."

    # Trust point check for different outcomes
    if trust_points >= 3:
        p "(Captain Mason and Sergeant Davis trust me. I need to use that to my advantage.)"
        c "You’ve got good instincts, soldier. Stick close to us. You’ll do fine."
        d "Yeah, this mission will be tough, but you’re ready."

    elif trust_points < 3:
        p "(I’ve made too many mistakes. The Captain and Sergeant seem wary of me.)"
        c "You’ve been hesitant today. I need soldiers who can make quick, confident decisions."
        d "Hope you can keep up out there."

    # Sudden explosion event
    scene bg shooting_range_night_emergency with fade
    p "Suddenly, the silence is broken by a distant explosion."
    p "Whatever this is, it’s no longer just a drill."

    if trust_points >= 3:
        c "We’ll need your skills. Stay sharp."
        d "Follow my lead, and we’ll get through this."

        # Continue the story with a positive outcome
        p "I nod, gripping my rifle tightly. This is no ordinary mission anymore. But I’m ready."
    
    else:
        c "Stay back and watch how it's done."
        d "Don’t get in our way, or you’ll become a liability."

        # Continue the story with a more negative outcome
        p "I fall behind, struggling to keep up. Maybe I wasn’t prepared for this after all."

    # End of demo
    return
